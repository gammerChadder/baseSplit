{"version":3,"file":"OnchainKitProvider.js","sources":["../src/OnchainKitProvider.tsx"],"sourcesContent":["'use client';\nimport { setOnchainKitConfig } from '@/core/OnchainKitConfig';\nimport { useMemo } from 'react';\nimport { DefaultOnchainKitProviders } from './DefaultOnchainKitProviders';\nimport OnchainKitProviderBoundary from './OnchainKitProviderBoundary';\nimport { DEFAULT_PRIVACY_URL, DEFAULT_TERMS_URL } from './core/constants';\nimport { COINBASE_VERIFIED_ACCOUNT_SCHEMA_ID } from './identity/constants';\nimport { checkHashLength } from './internal/utils/checkHashLength';\nimport type { OnchainKitProviderReact } from './types';\nimport { generateUUIDWithInsecureFallback } from './utils/crypto';\nimport { OnchainKitContext } from './useOnchainKit';\n\n/**\n * Provides the OnchainKit React Context to the app.\n */\nexport function OnchainKitProvider({\n  address,\n  analytics,\n  apiKey,\n  chain,\n  children,\n  config,\n  projectId,\n  rpcUrl,\n  schemaId,\n}: OnchainKitProviderReact) {\n  if (schemaId && !checkHashLength(schemaId, 64)) {\n    throw Error('EAS schemaId must be 64 characters prefixed with \"0x\"');\n  }\n\n  const sessionId = useMemo(() => generateUUIDWithInsecureFallback(), []);\n\n  // eslint-disable-next-line complexity\n  const value = useMemo(() => {\n    const defaultPaymasterUrl = apiKey\n      ? `https://api.developer.coinbase.com/rpc/v1/${chain.name\n          .replace(' ', '-')\n          .toLowerCase()}/${apiKey}`\n      : null;\n    const onchainKitConfig = {\n      address: address ?? null,\n      apiKey: apiKey ?? null,\n      chain: chain,\n      config: {\n        analytics: analytics ?? true,\n        analyticsUrl: config?.analyticsUrl ?? null,\n        appearance: {\n          name: config?.appearance?.name ?? 'Dapp',\n          logo: config?.appearance?.logo ?? '',\n          mode: config?.appearance?.mode ?? 'auto',\n          theme: config?.appearance?.theme ?? 'default',\n        },\n        paymaster: config?.paymaster || defaultPaymasterUrl,\n        wallet: {\n          display: config?.wallet?.display ?? 'classic',\n          preference: config?.wallet?.preference ?? 'all',\n          signUpEnabled: config?.wallet?.signUpEnabled ?? true,\n          termsUrl: config?.wallet?.termsUrl || DEFAULT_TERMS_URL,\n          privacyUrl: config?.wallet?.privacyUrl || DEFAULT_PRIVACY_URL,\n          supportedWallets: {\n            rabby: config?.wallet?.supportedWallets?.rabby ?? false,\n            trust: config?.wallet?.supportedWallets?.trust ?? false,\n            frame: config?.wallet?.supportedWallets?.frame ?? false,\n          },\n        },\n      },\n      projectId: projectId ?? null,\n      rpcUrl: rpcUrl ?? null,\n      schemaId: schemaId ?? COINBASE_VERIFIED_ACCOUNT_SCHEMA_ID,\n      sessionId,\n    };\n    setOnchainKitConfig(onchainKitConfig);\n    return onchainKitConfig;\n  }, [\n    address,\n    analytics,\n    apiKey,\n    chain,\n    config,\n    projectId,\n    rpcUrl,\n    schemaId,\n    sessionId,\n  ]);\n\n  return (\n    <OnchainKitContext.Provider value={value}>\n      <DefaultOnchainKitProviders>\n        <OnchainKitProviderBoundary>{children}</OnchainKitProviderBoundary>\n      </DefaultOnchainKitProviders>\n    </OnchainKitContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;AAeO,SAAS,mBAAmB;AAAA,EACjC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAA4B;AAC1B,MAAI,YAAY,CAAC,gBAAgB,UAAU,EAAE,GAAG;AAC9C,UAAM,MAAM,uDAAuD;AAAA,EAAA;AAGrE,QAAM,YAAY,QAAQ,MAAM,iCAAiC,GAAG,CAAA,CAAE;AAGhE,QAAA,QAAQ,QAAQ,MAAM;;AAC1B,UAAM,sBAAsB,SACxB,6CAA6C,MAAM,KAChD,QAAQ,KAAK,GAAG,EAChB,YAAa,CAAA,IAAI,MAAM,KAC1B;AACJ,UAAM,mBAAmB;AAAA,MACvB,SAAS,WAAW;AAAA,MACpB,QAAQ,UAAU;AAAA,MAClB;AAAA,MACA,QAAQ;AAAA,QACN,WAAW,aAAa;AAAA,QACxB,eAAc,iCAAQ,iBAAgB;AAAA,QACtC,YAAY;AAAA,UACV,QAAM,sCAAQ,eAAR,mBAAoB,SAAQ;AAAA,UAClC,QAAM,sCAAQ,eAAR,mBAAoB,SAAQ;AAAA,UAClC,QAAM,sCAAQ,eAAR,mBAAoB,SAAQ;AAAA,UAClC,SAAO,sCAAQ,eAAR,mBAAoB,UAAS;AAAA,QACtC;AAAA,QACA,YAAW,iCAAQ,cAAa;AAAA,QAChC,QAAQ;AAAA,UACN,WAAS,sCAAQ,WAAR,mBAAgB,YAAW;AAAA,UACpC,cAAY,sCAAQ,WAAR,mBAAgB,eAAc;AAAA,UAC1C,iBAAe,sCAAQ,WAAR,mBAAgB,kBAAiB;AAAA,UAChD,YAAU,sCAAQ,WAAR,mBAAgB,aAAY;AAAA,UACtC,cAAY,sCAAQ,WAAR,mBAAgB,eAAc;AAAA,UAC1C,kBAAkB;AAAA,YAChB,SAAO,4CAAQ,WAAR,mBAAgB,qBAAhB,mBAAkC,UAAS;AAAA,YAClD,SAAO,4CAAQ,WAAR,mBAAgB,qBAAhB,mBAAkC,UAAS;AAAA,YAClD,SAAO,4CAAQ,WAAR,mBAAgB,qBAAhB,mBAAkC,UAAS;AAAA,UAAA;AAAA,QACpD;AAAA,MAEJ;AAAA,MACA,WAAW,aAAa;AAAA,MACxB,QAAQ,UAAU;AAAA,MAClB,UAAU,YAAY;AAAA,MACtB;AAAA,IACF;AACA,wBAAoB,gBAAgB;AAC7B,WAAA;AAAA,EAAA,GACN;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AAGC,SAAA,oBAAC,kBAAkB,UAAlB,EAA2B,OAC1B,UAAC,oBAAA,4BAAA,EACC,UAAC,oBAAA,4BAAA,EAA4B,SAAS,CAAA,EACxC,CAAA,GACF;AAEJ;"}