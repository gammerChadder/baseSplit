{"version":3,"file":"useAnalytics.js","sources":["../../../../src/core/analytics/hooks/useAnalytics.ts"],"sourcesContent":["import { getOnchainKitConfig } from '@/core/OnchainKitConfig';\nimport { ANALYTICS_API_URL } from '@/core/analytics/constants';\nimport type {\n  AnalyticsEvent,\n  AnalyticsEventData,\n} from '@/core/analytics/types';\nimport { sendAnalytics } from '@/core/analytics/utils/sendAnalytics';\nimport { useMemo } from 'react';\n\nconst prepareAnalyticsPayload = <T extends AnalyticsEvent>(\n  event: T,\n  data: AnalyticsEventData[T],\n) => {\n  const config = getOnchainKitConfig('config');\n\n  return {\n    url: config?.analyticsUrl ?? ANALYTICS_API_URL,\n    headers: {\n      'OnchainKit-App-Name': document.title,\n    },\n    body: {\n      apiKey: getOnchainKitConfig('apiKey') ?? 'undefined',\n      sessionId: getOnchainKitConfig('sessionId') ?? 'undefined',\n      timestamp: Date.now(),\n      eventType: event,\n      data,\n      origin: window.location.origin,\n    },\n  };\n};\n\nexport function sendAnalyticsPayload<T extends AnalyticsEvent>(\n  event: T,\n  data: AnalyticsEventData[T],\n): void {\n  // Don't send analytics if disabled\n  const config = getOnchainKitConfig('config');\n\n  if (!config?.analytics) {\n    return;\n  }\n  const payload = prepareAnalyticsPayload(event, data);\n  sendAnalytics(payload);\n}\n\n/**\n * useAnalytics handles analytics events and data preparation\n */\nexport const useAnalytics = () => {\n  return useMemo(\n    () => ({\n      sendAnalytics: sendAnalyticsPayload,\n    }),\n    [],\n  );\n};\n"],"names":[],"mappings":";;;;AASA,MAAM,0BAA0B,CAC9B,OACA,SACG;AACG,QAAA,SAAS,oBAAoB,QAAQ;AAEpC,SAAA;AAAA,IACL,MAAK,iCAAQ,iBAAgB;AAAA,IAC7B,SAAS;AAAA,MACP,uBAAuB,SAAS;AAAA,IAClC;AAAA,IACA,MAAM;AAAA,MACJ,QAAQ,oBAAoB,QAAQ,KAAK;AAAA,MACzC,WAAW,oBAAoB,WAAW,KAAK;AAAA,MAC/C,WAAW,KAAK,IAAI;AAAA,MACpB,WAAW;AAAA,MACX;AAAA,MACA,QAAQ,OAAO,SAAS;AAAA,IAAA;AAAA,EAE5B;AACF;AAEgB,SAAA,qBACd,OACA,MACM;AAEA,QAAA,SAAS,oBAAoB,QAAQ;AAEvC,MAAA,EAAC,iCAAQ,YAAW;AACtB;AAAA,EAAA;AAEI,QAAA,UAAU,wBAAwB,OAAO,IAAI;AACnD,gBAAc,OAAO;AACvB;AAKO,MAAM,eAAe,MAAM;AACzB,SAAA;AAAA,IACL,OAAO;AAAA,MACL,eAAe;AAAA,IAAA;AAAA,IAEjB,CAAA;AAAA,EACF;AACF;"}